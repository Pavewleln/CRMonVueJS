"use strict";(self["webpackChunksrm"]=self["webpackChunksrm"]||[]).push([[148],{3314:function(e,r,t){function l(e,r="RUB"){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:r}).format(e)}t.d(r,{Z:function(){return l}})},148:function(e,r,t){t.r(r),t.d(r,{default:function(){return _}});var l=t(3396),n=t(7139);const c={class:"app-page"},i={class:"page-title"},s=(0,l._)("h3",null,"Планирование",-1),o={key:1,class:"center"},u={key:2,class:"center"},a={key:3},d={class:"progress"};function p(e,r,t,p,g,w){const y=(0,l.up)("AppLoader"),v=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("div",null,[(0,l._)("div",i,[s,(0,l._)("h4",null,(0,n.zw)(p.currencyFilter(p.bill)),1)]),p.loading?((0,l.wg)(),(0,l.j4)(y,{key:0})):p.categories?p.records?((0,l.wg)(),(0,l.iD)("section",a,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(p.categories,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l._)("p",null,[(0,l._)("strong",null,(0,n.zw)(e.title)+":",1),(0,l.Uk)(" "+(0,n.zw)(p.currencyFilter(e.spend))+" из "+(0,n.zw)(p.currencyFilter(e.limit)),1)]),(0,l._)("div",d,[(0,l._)("div",{class:(0,n.C_)(["determinate",[e.progressColor]]),style:(0,n.j5)({width:e.progressPercent+"%"})},null,6)])])))),128))])):((0,l.wg)(),(0,l.iD)("p",u,[(0,l.Uk)("Записей пока нет. "),(0,l.Wm)(v,{to:"/record"},{default:(0,l.w5)((()=>[(0,l.Uk)("Добавить запись")])),_:1})])):((0,l.wg)(),(0,l.iD)("p",o,[(0,l.Uk)("Категорий пока нет. "),(0,l.Wm)(v,{to:"/categories"},{default:(0,l.w5)((()=>[(0,l.Uk)("Добавить категорию")])),_:1})]))])])}var g=t(4870),w=t(65),y=t(9877),v=t(3314),f={components:{AppLoader:y.Z},setup(){const e=(0,w.oR)(),r=(0,l.Fl)((()=>e.getters["auth/info"].bill)),t=(0,g.iH)(!1),n=(0,g.iH)([]),c=(0,g.iH)([]);return(0,l.bv)((async()=>{t.value=!0,c.value=await e.dispatch("record/getAllRecords");const r=await e.dispatch("category/getAllCategory");r&&c.value?n.value=r.map((e=>{const r=c.value.filter((r=>r.categoryId===e.id)).filter((e=>"outcome"===e.type)).reduce(((e,r)=>e+ +r.amount),0),t=100*r/e.limit,l=t>100?100:t,n=t<60?"green":t<100?"yellow":"red";return{...e,progressPercent:l,progressColor:n,spend:r}})):n.value=r,t.value=!1})),{loading:t,categories:n,bill:r,currencyFilter:v.Z,records:c}}},k=t(89);const m=(0,k.Z)(f,[["render",p]]);var _=m}}]);
//# sourceMappingURL=148.4cf7bad5.js.map